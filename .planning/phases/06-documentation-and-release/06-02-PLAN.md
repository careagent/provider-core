---
phase: 06-documentation-and-release
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/onboarding.md
  - docs/configuration.md
autonomous: true
requirements:
  - DOCS-03
  - DOCS-04

must_haves:
  truths:
    - "A provider can understand the onboarding flow from careagent init through first clinical interaction by reading the walkthrough"
    - "The onboarding walkthrough uses generic 'the provider' throughout with no specialty-specific persona"
    - "The onboarding walkthrough ends at careagent status showing skills active and hardened agent ready"
    - "CANS.md schema, skill manifest format, and plugin configuration are fully documented with field tables and annotated examples"
  artifacts:
    - path: "docs/onboarding.md"
      provides: "Conceptual onboarding walkthrough with commands"
      contains: "careagent init"
    - path: "docs/configuration.md"
      provides: "Schema reference for CANS.md, skill manifests, and plugin config"
      contains: "version"
  key_links:
    - from: "docs/onboarding.md"
      to: "docs/configuration.md"
      via: "CANS.md schema link"
      pattern: "configuration\\.md"
    - from: "docs/configuration.md"
      to: "src/activation/cans-schema.ts"
      via: "source of truth reference"
      pattern: "cans-schema"
---

<objective>
Create the onboarding walkthrough and configuration reference as standalone docs/ files.

Purpose: The onboarding guide bridges installation to usage — a provider follows it to set up their clinical identity. The configuration reference is the technical spec for CANS.md and skill manifests. Together they satisfy DOCS-03 and DOCS-04.

Output: `docs/onboarding.md`, `docs/configuration.md`
</objective>

<execution_context>
@/Users/medomatic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/medomatic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-documentation-and-release/06-CONTEXT.md
@.planning/phases/06-documentation-and-release/06-RESEARCH.md
@README.md
@src/activation/cans-schema.ts
@src/onboarding/stages.ts
@src/skills/manifest-schema.ts
@openclaw.plugin.json
@test/fixtures/valid-cans.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create onboarding walkthrough (docs/onboarding.md)</name>
  <files>docs/onboarding.md</files>
  <action>
Create `docs/onboarding.md`. Writing tone: direct, authoritative, declarative. Use generic "the provider" throughout — no specific specialty persona (per user decision).

This is a conceptual walkthrough with key commands, NOT a terminal-output-heavy tutorial. Happy path only — no troubleshooting section (per user decision).

Structure:

1. **Overview** — One paragraph: `careagent init` launches an interactive onboarding interview that discovers the provider's clinical identity, generates a personalized CANS.md, and supplements workspace files. Link to `docs/installation.md` as the prerequisite.

2. **Starting Onboarding** — Show the command:
   ```bash
   careagent init
   ```
   Explain that the interview is conversational — the provider answers questions and the system builds their clinical profile.

3. **Interview Stages** — Describe each stage conceptually (derive from `src/onboarding/stages.ts` which defines: welcome > identity > credentials > specialty > scope > philosophy > voice > autonomy > consent > complete). For each stage, explain:
   - What information is collected
   - Why it matters (one sentence)

   Stages to document:
   - **Welcome** — HIPAA warning acknowledgment, synthetic data only notice
   - **Identity** — Provider name, NPI (optional), provider type(s), degrees
   - **Credentials** — License numbers, certifications, credential status
   - **Specialty** — Primary specialty, subspecialty (optional), organizations with privileges
   - **Scope** — Permitted clinical actions (whitelist model — only explicitly listed actions are authorized)
   - **Philosophy** — Clinical philosophy statement (shapes agent behavior)
   - **Voice** — Documentation voice directives per atomic action (chart, order, charge, perform, interpret, educate, coordinate)
   - **Autonomy** — Autonomy tier per atomic action: autonomous, supervised, or manual
   - **Consent** — Audit consent, HIPAA acknowledgment, synthetic data confirmation

4. **CANS.md Generation** — After the interview, the system generates a personalized CANS.md. The provider reviews, can request adjustments, and approves before finalizing. CANS.md is placed in the workspace. Link to `docs/configuration.md` for full schema reference.

5. **Workspace Supplementation** — After CANS.md is generated, onboarding supplements existing workspace files (SOUL.md, AGENTS.md, USER.md) with clinical content. Existing content is preserved — never replaced. Migrate the README "Workspace After Onboarding" table here (the table listing SOUL.md, AGENTS.md, USER.md, TOOLS.md, CANS.md, AUDIT.log etc.).

6. **Activation** — On the next agent run, the presence of CANS.md activates the clinical layer. Show:
   ```bash
   careagent status
   ```
   Explain what the provider sees: activation state, CANS summary, hardening layer status, loaded clinical skills, and audit stats. This is the end point of the walkthrough.

Do NOT include: full terminal output for each stage, troubleshooting, chart-skill usage example, specialty-specific content.
  </action>
  <verify>
- File exists at `docs/onboarding.md`
- Contains `careagent init` command
- Documents all interview stages (welcome through consent)
- Uses "the provider" throughout — no specialty-specific persona
- Ends with `careagent status` — does not continue into chart-skill usage
- Contains NO troubleshooting section
- Contains link to `configuration.md` for CANS.md schema
- Contains the workspace files table (migrated from README)
  </verify>
  <done>
Onboarding walkthrough exists documenting the complete flow from `careagent init` through `careagent status`. A provider can understand what onboarding will ask and what it produces without running it first.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create configuration reference (docs/configuration.md)</name>
  <files>docs/configuration.md</files>
  <action>
Create `docs/configuration.md`. This is a single file covering CANS.md schema, skill manifest format, and plugin configuration (per Claude's Discretion — single file since combined content will be ~200-300 lines, well within single-file comfort zone).

Writing tone: direct, authoritative, technical reference style. Use inline TypeScript examples for schema shapes.

Structure:

1. **CANS.md Schema Reference** — Document the complete CANSSchema from `src/activation/cans-schema.ts`:

   a. **Overview** — CANS.md uses YAML frontmatter. Version is currently "2.0". The frontmatter is validated against a TypeBox schema at parse time.

   b. **Field Reference Table** — Create a comprehensive table for every field:

   | Field | Type | Required | Description |

   Document all sub-schemas: provider (ProviderSchema), scope (ScopeSchema), autonomy (AutonomySchema), voice (VoiceSchema — optional), consent (ConsentSchema), skills (SkillsSchema), cross_installation (CrossInstallationConsentSchema — optional). For each field, check `Type.Optional()` wrapping in the source to determine required/optional. Be precise — do not guess.

   Key fields to document accurately from the schema:
   - `version`: string, required
   - `provider.name`: string (minLength: 1), required
   - `provider.npi`: string (10-digit pattern), optional
   - `provider.types`: string[] (minItems: 1), required
   - `provider.degrees`: string[], required
   - `provider.licenses`: string[], required
   - `provider.certifications`: string[], required
   - `provider.specialty`: string, optional
   - `provider.subspecialty`: string, optional
   - `provider.organizations`: Organization[] (minItems: 1), required — each has name (required), department (optional), privileges (optional), neuron_endpoint (optional), neuron_registration_id (optional), primary (optional)
   - `provider.credential_status`: "active" | "pending" | "expired", optional
   - `scope.permitted_actions`: string[] (minItems: 1), required
   - `autonomy.{chart,order,charge,perform,interpret,educate,coordinate}`: "autonomous" | "supervised" | "manual", all required
   - `voice.{chart,order,charge,perform,interpret,educate,coordinate}`: string, all optional
   - `consent.hipaa_warning_acknowledged`: boolean, required
   - `consent.synthetic_data_only`: boolean, required
   - `consent.audit_consent`: boolean, required
   - `consent.acknowledged_at`: string (ISO 8601), required
   - `skills.authorized`: string[], required
   - `cross_installation.allow_inbound`: boolean, required (but cross_installation itself is optional)
   - `cross_installation.allow_outbound`: boolean, required (but cross_installation itself is optional)

   c. **Complete Example** — Use `test/fixtures/valid-cans.md` as the base. Provide a fully annotated CANS.md YAML example with comments explaining each field. Adapt the fixture to use generic provider identity (not "Dr. Test Provider" — use something like "Dr. Jane Smith" with a realistic but clearly fictional persona). Keep the structure identical to the validated fixture.

   d. **Inline TypeScript Types** — Show the key TypeScript types (CANSDocument, AutonomyTier, Provider, Scope) as copied from source. Note these are defined using TypeBox and the source file is `src/activation/cans-schema.ts`.

2. **Skill Manifest Reference** — Document skill-manifest.json from `src/skills/manifest-schema.ts`:

   a. **Field Reference Table:**
   - `skill_id`: string (minLength: 1), required
   - `version`: string (semver pattern), required
   - `requires.license`: string[], optional
   - `requires.specialty`: string[], optional
   - `requires.privilege`: string[], optional
   - `files`: Record<string, string> (filename -> SHA-256 hash), required
   - `pinned`: boolean, required
   - `approved_version`: string, required

   b. **Example** — Read `skills/chart-skill/skill-manifest.json` for a real example to annotate.

3. **Plugin Configuration** — Document openclaw.plugin.json from the repo root:
   - `id`: Plugin identifier
   - `name`: Display name
   - `description`: Plugin description
   - `version`: Plugin version
   - `configSchema`: Configuration schema (currently empty object)
   - `skills`: Array of skill directory paths
   - `commands`: Array of CLI commands (currently empty — commands registered dynamically)
   - `hooks`: Array of hook registrations (currently empty — hooks registered dynamically)

Note: state that source of truth for all schemas is the TypeBox definitions in source code. Documentation reflects the schema as of v0.1.0.
  </action>
  <verify>
- File exists at `docs/configuration.md`
- Contains field reference tables for CANS.md schema (all fields from CANSSchema)
- Contains complete annotated CANS.md YAML example
- Contains skill manifest reference with field table and example
- Contains plugin configuration (openclaw.plugin.json) reference
- Every "required" field in docs matches a non-Optional field in the TypeBox source
- Every "optional" field in docs matches a Type.Optional() field in the TypeBox source
- Contains inline TypeScript type definitions
  </verify>
  <done>
Configuration reference exists with complete schema documentation for CANS.md, skill manifests, and plugin configuration. Every field is documented with type, required/optional status, and description. Examples are annotated and derived from validated test fixtures.
  </done>
</task>

</tasks>

<verification>
- `docs/onboarding.md` and `docs/configuration.md` exist
- Onboarding walkthrough covers all interview stages and ends at `careagent status`
- Configuration reference has field tables matching the actual TypeBox schemas
- No persona-specific content in onboarding (uses generic "the provider")
- Cross-references between docs use correct relative links
- No v2/aspirational features documented as functional
</verification>

<success_criteria>
A provider can follow the onboarding walkthrough to understand the setup process from `careagent init` to activation. A developer can look up any CANS.md field, skill manifest field, or plugin config field in the configuration reference and find its type, requirement status, and description.
</success_criteria>

<output>
After completion, create `.planning/phases/06-documentation-and-release/06-02-SUMMARY.md`
</output>
