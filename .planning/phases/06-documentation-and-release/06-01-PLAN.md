---
phase: 06-documentation-and-release
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/architecture.md
  - docs/installation.md
autonomous: true
requirements:
  - DOCS-01
  - DOCS-02

must_haves:
  truths:
    - "A developer can understand the plugin model, CANS activation mechanism, six hardening layers, and skill framework without reading source code"
    - "A developer can follow a step-by-step installation guide from VPS setup through first-run verification"
    - "Architecture guide contains Mermaid diagrams for ecosystem overview, activation flow, and hardening pipeline"
    - "Installation guide documents all prerequisites (Node >=22.12.0, pnpm, OpenClaw) and every step from zero to running CareAgent"
  artifacts:
    - path: "docs/architecture.md"
      provides: "Architecture guide with plugin model, CANS activation, hardening, skills, audit, ecosystem"
      contains: "mermaid"
    - path: "docs/installation.md"
      provides: "Installation guide with VPS setup, OpenClaw install, plugin install, first-run verification"
      contains: "careagent status"
  key_links:
    - from: "docs/architecture.md"
      to: "docs/installation.md"
      via: "cross-reference link"
      pattern: "installation\\.md"
---

<objective>
Create the architecture guide and installation guide as standalone docs/ files.

Purpose: These two guides form the technical foundation of the documentation. The architecture guide explains *what* the system is and *how* it works. The installation guide explains *how to get it running*. Together they satisfy DOCS-01 and DOCS-02.

Output: `docs/architecture.md`, `docs/installation.md`
</objective>

<execution_context>
@/Users/medomatic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/medomatic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-documentation-and-release/06-CONTEXT.md
@.planning/phases/06-documentation-and-release/06-RESEARCH.md
@README.md
@src/activation/cans-schema.ts
@src/hardening/engine.ts
@src/skills/manifest-schema.ts
@src/entry/openclaw.ts
@src/onboarding/stages.ts
@openclaw.plugin.json
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create architecture guide (docs/architecture.md)</name>
  <files>docs/architecture.md</files>
  <action>
Create `docs/` directory and `docs/architecture.md`. The guide targets both developers/contributors AND clinical IT evaluators. Writing tone: direct, authoritative, declarative, confident, no hedging.

Structure:

1. **Introduction** — One paragraph explaining what @careagent/provider-core is (plugin into OpenClaw, not a fork). Reference the Irreducible Risk Hypothesis and the deterministic governance layer concept from the README "The Plugin Is the Deterministic Layer" section.

2. **Ecosystem Overview** — Convert the existing README ASCII ecosystem diagram to a Mermaid `graph TD` diagram showing: National Axon Network > Organization Neuron > Provider OpenClaw Gateway > (main agent, other agents, Provider Care Agent) > (CANS.md, AUDIT.log, Clinical Skills, Cross-installation Protocol). Use the Mermaid from 06-RESEARCH.md as a starting point. Add a brief paragraph explaining the relationship: this plugin is one component in a larger ecosystem. Neuron and Axon are separate repositories and ecosystem-level components — describe conceptually but note they have their own repositories and are not features a developer uses from this plugin alone.

3. **CANS: Clinical Activation Mechanism** — Explain the CANS.md activation gate: presence triggers clinical mode, absence means standard OpenClaw. Describe what CANS.md contains at a high level (provider identity, scope, autonomy tiers, consent, skills, voice). Link to `docs/configuration.md` for full schema reference. Describe the validation flow: parse frontmatter > validate against TypeBox schema > SHA-256 integrity check. Add a Mermaid activation flow diagram (use the one from 06-RESEARCH.md: Gateway Start > CANS.md exists? > Parse > Valid? > Integrity? > Activate).

4. **Runtime Hardening** — Describe all six layers. For each layer: what it does, when it acts, what happens on deny. Add a Mermaid hardening pipeline diagram (from 06-RESEARCH.md: Tool Call > L1 > L2 > L3 > L4 > Allow/Block). Note: Layer 5 (Safety Guard / before_tool_call) and Layer 6 (Audit Trail) are part of the pipeline but handled differently — describe. Mention canary test (HARD-07) that verifies hook liveness. Emphasize: hardening is deterministic code, not probabilistic LLM behavior.

5. **Clinical Skills Framework** — Explain the skill lifecycle: install, integrity verification (SHA-256 checksum), credential gating (license/specialty/privilege), version pinning. Note: skills are OpenClaw skill packages with an additional clinical manifest (`skill-manifest.json`). Describe chart-skill as the reference implementation. Do NOT describe order-skill or charge-skill as functional — they are v2 scope.

6. **Audit Pipeline** — Describe AUDIT.log: append-only JSONL, hash chaining for tamper evidence, action states (AI-proposed, provider-approved, provider-modified, provider-rejected, system-blocked). Explain the audit integrity service (background monitoring).

7. **Repository Structure** — Migrate and update the README "Repository Structure" tree. List all src/ subdirectories with brief descriptions. Mark neuron/ and protocol/ as ecosystem stubs. Include skills/, test/, docs/ directories.

8. **Single-Agent vs Multi-Agent Mode** — Brief section from README. Explain isolation requirements in multi-agent mode.

Do NOT include: troubleshooting, v2 features (order-skill, charge-skill, patient CareAgents), detailed API documentation, full TypeBox schema listings (those go in configuration.md).

Use inline TypeScript examples sparingly for schema shapes (e.g., AutonomyTier type). Use file path references for implementation details (e.g., "see `src/hardening/engine.ts`").
  </action>
  <verify>
- File exists at `docs/architecture.md`
- Contains at least 3 Mermaid diagram blocks (```mermaid)
- Contains sections for: CANS activation, hardening layers (all 6 named), clinical skills, audit pipeline, repository structure
- Contains NO references to order-skill or charge-skill as functional features
- Contains NO troubleshooting sections
- All internal cross-references use relative links to other docs/ files
  </verify>
  <done>
Architecture guide exists with Mermaid diagrams, covers plugin model, CANS activation, six hardening layers, clinical skills framework, and audit pipeline. A developer or clinical IT evaluator can understand the system architecture without reading source code.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create installation guide (docs/installation.md)</name>
  <files>docs/installation.md</files>
  <action>
Create `docs/installation.md`. Writing tone: direct, authoritative, declarative.

Structure:

1. **Prerequisites** — List all requirements:
   - Node.js >= 22.12.0
   - pnpm (any recent version)
   - An existing OpenClaw installation (>= 2026.1.0 — from peerDependencies)
   - A VPS or local machine (macOS, Linux)

2. **VPS Setup** (for production deployments) — Brief section covering:
   - Install Node.js 22.x (point to official Node.js install guide, do not reproduce it)
   - Install pnpm: `npm install -g pnpm`
   - Install OpenClaw (point to OpenClaw documentation — we do not own that install process)

3. **Plugin Installation** — Step-by-step:
   ```bash
   openclaw plugins install @careagent/provider-core
   openclaw gateway restart
   careagent status
   ```
   Explain what each command does. The `careagent status` command should show the plugin installed but no CANS.md active yet. Link to `docs/onboarding.md` as the next step.

4. **First-Run Verification** — How to confirm the plugin installed correctly:
   - `careagent status` shows plugin loaded
   - No errors in gateway logs
   - `careagent init` is available as a command

5. **Entry Points** — Document the three package entry points from package.json exports:
   - `@careagent/provider-core` — Default (plugin index)
   - `@careagent/provider-core/openclaw` — OpenClaw platform integration
   - `@careagent/provider-core/standalone` — Standalone mode (no OpenClaw)
   - `@careagent/provider-core/core` — Pure library types and utilities

Do NOT include: onboarding steps (that is docs/onboarding.md), troubleshooting, local development setup (that is CONTRIBUTING.md).

End with: "Next step: [Onboarding Walkthrough](onboarding.md) — set up your clinical identity."
  </action>
  <verify>
- File exists at `docs/installation.md`
- Contains Node.js version requirement (22.12.0)
- Contains `openclaw plugins install @careagent/provider-core` command
- Contains reference to all three entry point paths
- Contains link to `onboarding.md` as next step
- Contains NO onboarding steps or `careagent init` walkthrough content
  </verify>
  <done>
Installation guide exists covering all prerequisites, VPS setup pointers, plugin installation commands, first-run verification steps, and entry point documentation. A developer can go from zero to a running CareAgent installation by following this guide alone.
  </done>
</task>

</tasks>

<verification>
- `docs/` directory exists with `architecture.md` and `installation.md`
- Architecture guide has 3+ Mermaid diagrams, covers all major subsystems
- Installation guide has complete step-by-step from prerequisites to first-run
- Cross-references between the two guides use correct relative links
- No v2/aspirational content (order-skill, charge-skill, patient CareAgents presented as functional)
- Writing tone is direct, authoritative, declarative throughout
</verification>

<success_criteria>
A developer who has never seen CareAgent can read the architecture guide and understand how the system works. The same developer can follow the installation guide from zero to a running plugin. Both guides use Mermaid diagrams where helpful and link to other docs/ files for deeper content.
</success_criteria>

<output>
After completion, create `.planning/phases/06-documentation-and-release/06-01-SUMMARY.md`
</output>
