---
phase: 02.1-architectural-alignment
plan: 04
subsystem: api
tags: [entry-point, re-exports, readme, documentation, type-surface]

# Dependency graph
requires:
  - phase: 02.1-02
    provides: "Four stub modules (hardening, credentials, neuron, protocol) with types and factories"
  - phase: 02.1-03
    provides: "CANS schema extensions (NeuronConfig, SkillGating, CrossInstallationConsent)"
  - phase: 02.1-01
    provides: "Stale import shims removed, all imports canonical"
provides:
  - "Complete type surface via @careagent/provider-core/core import path"
  - "README Repository Structure documenting all 11 src/ subdirectories with stub annotations"
  - "Phase 02.1 fully verified: no stale imports, no circular dependencies, 426 tests passing"
affects: [phase-3-hardening, phase-4-credentials, phase-5-neuron-protocol]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Type re-export barrel pattern in entry/core.ts for stable public API surface"
    - "README stub annotation pattern: [stub -- Phase N] for interface-only modules"

key-files:
  created: []
  modified:
    - src/entry/core.ts
    - README.md

key-decisions:
  - "Entry/core.ts re-exports both types and factory functions from stub modules for complete API surface"
  - "README lists all 11 actual src/ subdirectories; removes 4 non-existent directories (skills, templates, docs, types)"

patterns-established:
  - "Stub annotation in README: [stub -- Phase N] marks interface-only modules"
  - "Core entry point is the canonical type re-export surface for all modules"

# Metrics
duration: 2min
completed: 2026-02-19
---

# Phase 2.1 Plan 04: Entry Point Re-exports and README Structure Alignment Summary

**Core entry point re-exports all stub module types/factories plus CANS schema extensions; README documents all 11 actual src/ directories with stub annotations**

## Performance

- **Duration:** 114s (~2 min)
- **Started:** 2026-02-19T14:36:41Z
- **Completed:** 2026-02-19T14:38:35Z
- **Tasks:** 3
- **Files modified:** 2

## Accomplishments
- entry/core.ts now provides a complete type surface for all modules via `@careagent/provider-core/core`
- Four stub module re-exports added: HardeningEngine, CredentialValidator, NeuronClient, ProtocolServer (types + factories)
- Four CANS schema extension types added: NeuronConfig, SkillGatingRule, SkillGating, CrossInstallationConsent
- README Repository Structure updated to list all 11 actual src/ subdirectories (adding adapters/, cli/, entry/, vendor/)
- Removed 4 non-existent directories from README (skills/, templates/, docs/, types/)
- Stub modules clearly annotated with [stub -- Phase N] markers
- Full phase verification: 426 tests pass, build succeeds, no stale imports, no circular dependencies

## Task Commits

Each task was committed atomically:

1. **Task 1: Update entry/core.ts with stub module re-exports** - `5e426e3` (feat)
2. **Task 2: Update README Repository Structure and stub annotations** - `ac207a5` (docs)
3. **Task 3: Final phase verification** - no file changes (verification-only)

## Files Created/Modified
- `src/entry/core.ts` - Added re-exports for 4 stub modules (types + factories) and 4 CANS schema extension types
- `README.md` - Updated Repository Structure section to reflect actual codebase with stub annotations

## Decisions Made
- Entry/core.ts re-exports both types and factory functions (not just types) from stub modules, enabling downstream code to import everything from the core entry point
- README lists all 11 actual src/ subdirectories; 4 non-existent directories removed (skills/, templates/, docs/, types/)

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
None

## User Setup Required
None - no external service configuration required.

## Next Phase Readiness
- Phase 02.1 (Architectural Alignment) is complete: all 4 plans executed successfully
- Codebase matches README target architecture
- All 426 tests pass across 30 test files
- All 4 entry points build successfully (index, openclaw, standalone, core)
- No stale imports to deleted directories (src/adapter/, src/types/)
- No circular dependencies between existing modules and stub modules
- Ready for Phase 3 (Hardening) which will implement the hardening stub interfaces

---
*Phase: 02.1-architectural-alignment*
*Completed: 2026-02-19*

## Self-Check: PASSED
- All files exist: src/entry/core.ts, README.md, 02.1-04-SUMMARY.md
- All commits verified: 5e426e3, ac207a5
